
<div class="row">
    <div class="row">
        <div class="small-12 columns">
            <ul class="breadcrumbs">
                <li><a href="#">Parent Tags</a></li>
            </ul>
        </div>
    </div>
    <div class="small-12 columns">
        <h3>
            {{ topic_title }}
        </h3>
        <div class="small-11 small-centered columns">
            <table class="responsive" width='100%' cellpadding="0" cellspacing="0" border="0">
                <tbody id="posts">
                    <tr>
                        <td>There seem to be no posts at the moment. Why not create one?</td>
                        <td>The Boss</td>
                        <td>From the Beginning of Time</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

{# Microthread Modal #}
<div id="microModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
    <h2 id="microTitle">Microthread Title</h2>
    <table class="responsive" width='100%' cellpadding="0" cellspacing="0" border="0">
        <tbody id="micro_posts">
            <tr>
                <td>There seem to be no posts at the moment. Why not create one?</td>
                <td>The Boss</td>
                <td>From the Beginning of Time</td>
            </tr>
        </tbody>
    </table>
    <a class="close-reveal-modal" aria-label="Close">&#215;</a>
</div>

{# Post Template #}
<div class="hide">
    <div id="post">
        <table class="post">
            <tbody>
                <tr class="post_info">
                    <th class="post_username" width="150"></th>
                    <td class="post_other"></td>
                    <td class="post_date" width="200"></td>
                </tr>
                <tr>
                    <td class="post_text" colspan="3"></td>
                </tr>
                <tr>
                    <td class="post_options" colspan="3"></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
$(document).on('click', '.microthread', function() {
    $('#microModal').foundation('reveal', 'open', '');
});

$.ajax({
    url: '{% url 'posts' topic_id %}',
    success: function( data ) {
        if (data.success) {
            $('#posts').html("");
            if (data.posts.length > 0) {
                for (var i = 0; i < data.posts.length; i++) {
                    var post = data.posts[i];
                    $('#post .post_username').html(post.post_author);
                    $('#post .post_date').html(post.post_date);
                    $('#post .post_text').html(post.post_text);
                    $('#post .post_options').html('<a class="microthread" href="#">Microthread</a>');
                    
                    $('#posts').append( $("#post").html() );
                }
            }
        }
    }
});
</script>
