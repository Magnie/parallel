
<div class="row">
    <div class="row">
        <div class="small-12 columns">
            <ul class="breadcrumbs">
                <li><a href="#">Parent Tags</a></li>
            </ul>
        </div>
    </div>
    <div class="small-12 columns">
        <h3>
            {{ tag_name }}
        </h3>
        <div class="small-11 small-centered columns">
            <div class="row">
                <div class="small-12 columns">
                    <ul class="breadcrumbs">
                        <li><a href="#">Home</a></li>
                    </ul>
                </div>
            </div>
            <table id="topics" class="responsive" width='100%'>
                <thead>
                    <tr>
                        <th>Title</th>
                        <th width="150">Author</th>
                        <th width="150">Last Post</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>There seem to be no topics. Why not create one?</td>
                        <td>The Boss</td>
                        <td>From the Beginning of Time</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
$.ajax({
    url: '{% url 'topics' tag_id %}',
    success: function( data ) {
        if (data.success) {
            console.log('topics retrieved');
            html = '';
            if (data.topics.length > 0) {
                for (var i = 0; i < data.topics.length; i++) {
                    var topic = data.topics[i];
                    var url_mask = "{% url 'posts' 0 %}".replace(/0/, topic.topic_id.toString());
                    html += '<tr>';
                    html += '<td><a href="' + url_mask + '">' + topic.topic_title + '</a></td>';
                    html += '<td>' + topic.topic_author + '</td>';
                    html += '<td>' + topic.last_post + '</td>';
                    html += '</tr>';
                }
                $('#topics tbody').html(html);
            }
        }
    }
});
</script>
